{%extends 'jinja_forms.html'%}
{% block content %}

  {%include 'nav.html' %}
  {% for course in courses %}
    <!-- Page Header -->
    <header class="masthead" style="background-image: url('{{ url_for('static', filename='img/post-bg.jpg') }}')">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <div class="post-heading">
              <h1>{{ course['title'] }}</h1>
              <h2 class="subheading">{{ course['subtitle'] }}</h2>
              <span class="meta">Posted by {{ course['posted_by'] }}
                on {{ course['day_posted'].strftime('%B %d, %Y') }} </span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <article>
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-md-10 mx-auto">
            <span>{{ course['content']|safe }}</span>
          </div>
        </div>
      </div>
    </article>

    <hr>

    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
        {% for review in reviews %}
          <div class="post-preview">
            <p class="post-meta">Відгук від {{ review['posted_by'] }}, {{ review['day_posted'].strftime('%B %d, %Y') }} </p>
            <a href="">
              <h3 class="post-subtitle">
                <b>Переваги:</b> {{ review['pros'] }}
              </h3>
              <h3 class="post-subtitle">
                <b>Недоліки:</b> {{ review['cons'] }}
              </h3>
              <h3 class="post-subtitle">
                <b>Коментар:</b> {{ review['comment'] }}
              </h3>
            </a>
          </div>
          <hr>
          {% endfor %}
        </div>
      </div>
    </div>

    <section style="background-color: #d94125;">
      <div class="container my-5 py-5 text-dark">
        <div class="row d-flex justify-content-center">
          <div class="col-md-10 col-lg-8 col-xl-6">
            <div class="card">
              <div class="card-body p-4">
                <div class="d-flex flex-start w-100">
                  <img class="rounded-circle shadow-1-strong me-3"
                    src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/img%20(21).webp" alt="avatar" width="65"
                    height="65" />
                  <div class="w-100">
                    <h5>Add a comment</h5>
                    <ul class="rating mb-3" data-mdb-toggle="rating">
                      <li>
                        <i class="far fa-star fa-sm text-danger" title="Bad"></i>
                      </li>
                      <li>
                        <i class="far fa-star fa-sm text-danger" title="Poor"></i>
                      </li>
                      <li>
                        <i class="far fa-star fa-sm text-danger" title="OK"></i>
                      </li>
                      <li>
                        <i class="far fa-star fa-sm text-danger" title="Good"></i>
                      </li>
                      <li>
                        <i class="far fa-star fa-sm text-danger" title="Excellent"></i>
                      </li>
                    </ul>
                    <div class="form-outline">
                      <textarea class="form-control" id="textAreaExample" rows="4"></textarea>
                      <label class="form-label" for="textAreaExample">What is your view?</label>
                    </div>
                    <div class="d-flex justify-content-between mt-3">
                      <button type="button" class="btn btn-success">Danger</button>
                      <button type="button" class="btn btn-danger">
                        Send <i class="fas fa-long-arrow-alt-right ms-1"></i>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    {% if g.user_role == 'student' %}
    <div class="container">
      <div class="card bg-light">
      <article class="card-body mx-auto" style="max-width: 600px;">
          <br><br>
          <h4 class="card-title mt-3 text-center">Додати відгук до курсу</h4>
          <br>
          <form action="{{ url_for('addreview') }}" name="addForm" id="addForm" method="POST" class="needs-validation" novalidate>
              <div class="rating">
                <input type="radio" name="rating" value="5" id="5">
                <label for="5">☆</label>
                <input type="radio" name="rating" value="4" id="4">
                <label for="4">☆</label>
                <input type="radio" name="rating" value="3" id="3">
                <label for="3">☆</label>
                <input type="radio" name="rating" value="2" id="2">
                <label for="2">☆</label>
                <input type="radio" name="rating" value="1" id="1">
                <label for="1">☆</label>
                <h6>Оцінка:</h6>
              </div>
              <div class="control-group">
                  <div class="form-group floating-label-form-group controls">
                    <label>Переваги</label>
                    <input type="text" class="form-control" placeholder="Переваги" name="pros" id="pros">
                  </div>
              </div>
              <div class="control-group">
                  <div class="form-group floating-label-form-group controls">
                    <label>Недоліки</label>
                    <input type="text" class="form-control" placeholder="Недоліки" name="cons" id="cons">
                  </div>
              </div>
              <div class="control-group">
                <div class="form-group floating-label-form-group controls">
                  <label>Коментар</label>
                  <textarea rows="5" class="form-control" placeholder="Коментар" name="comment" id="comment"></textarea>
                </div>
              </div>
              <div class="control-group" style="display: none;">
                  <input type="text" class="form-control" name="course_id" id="course_id" value="{{ course['id'] }}">
              </div>
              <br>
              <div id="success"></div>
              <div class="form-group" id="submit_button">
                <button type="submit" class="btn btn-primary btn-block">Додати</button>
              </div>
          </form>
      </article>
      </div>
    </div>
    {% endif %}
  {% endfor %} 
{% endblock %}